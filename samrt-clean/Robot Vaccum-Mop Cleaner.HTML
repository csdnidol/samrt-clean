<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartClean X1 - 未来科技版交互指南</title>
<!-- 引入 Markdown 解析库 -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<!-- 引入粒子库 -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<style>
/* ========= 基础设置与全局动画 ========= */
:root {
    --primary-color: #40E0D0; /* 科技蓝 */
    --secondary-color: #008B8B; /* 深青色 */
    --bg-dark: #0f1519; /* 更深的蓝黑背景 */
    --bg-card: rgba(20, 35, 40, 0.7); /* 半透明卡片 */
    --text-light: #e0f7fa;
    --text-dim: #80deea;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
    font-family:'Inter',-apple-system,'PingFang SC','Microsoft YaHei',sans-serif;
    line-height:1.6;
    color:var(--text-light);
    background: var(--bg-dark);
    overflow-x:hidden;
    /* 自定义光标 */
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%2340E0D0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>') 12 12, auto;
}
/* 滚动条样式 */
::-webkit-scrollbar {width: 8px;}
::-webkit-scrollbar-track {background: var(--bg-dark);}
::-webkit-scrollbar-thumb {background: var(--secondary-color);border-radius: 4px;}

/* 全局粒子背景容器 */
#particles-js {position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;}

/* 导航栏 */
.navbar{
    position:fixed;top:0;width:100%;
    background:rgba(15, 21, 25, 0.8);
    backdrop-filter:blur(20px);
    box-shadow:0 4px 30px rgba(0,0,0,0.3);
    z-index:1000;transition:.3s;
    border-bottom:1px solid rgba(64, 224, 208, 0.1);
}
.nav-container{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem}
.logo{font-size:1.5rem;font-weight:700;color:var(--primary-color);letter-spacing:1px;display:flex;align-items:center;gap:10px;text-shadow: 0 0 15px rgba(64,224,208,0.6);}
.nav-menu{display:flex;list-style:none;gap:2rem}
.nav-item{position:relative;cursor:pointer;padding:.5rem 1rem;border-radius:30px;font-weight:500;color:var(--text-dim);transition:.3s;border: 1px solid transparent;}
.nav-item:hover{color:var(--primary-color);background:rgba(64, 224, 208, 0.1);border-color: rgba(64,224,208,0.3);box-shadow: 0 0 15px rgba(64, 224, 208, 0.1);}
.nav-item.active{color:var(--bg-dark);background:var(--primary-color);box-shadow: 0 0 20px rgba(64, 224, 208, 0.4);}

/* 通用布局与动画 */
.main-content{margin-top:0;} /* Hero 全屏覆盖 */
.section{min-height:100vh;padding:6rem 2rem;display:flex;align-items:center;justify-content:center;opacity:0;transform:translateY(50px);transition:opacity 0.8s ease-out, transform 0.8s ease-out;}
.section.visible{opacity:1;transform:translateY(0)}
.container{max-width:1200px;margin:0 auto;width:100%;position: relative;z-index: 2;}
.section-title{
    text-align:center;font-size:2.8rem;margin-bottom:3rem;color:var(--primary-color);font-weight:700;letter-spacing:2px;
    text-shadow: 0 0 20px rgba(64, 224, 208, 0.4);
    position: relative;
}
.section-title::after {content:'';position:absolute;bottom:-15px;left:50%;transform:translateX(-50%);width:60px;height:3px;background:var(--primary-color);box-shadow: 0 0 15px var(--primary-color);}

/* ========= Hero 区域：深海雷达风格 (复刻图片) ========= */
.hero{
    /* 更加深邃的青黑渐变背景 */
    background: radial-gradient(circle at center, #1a2a30 0%, #0a0e12 100%);
    text-align:center; position:relative; overflow:hidden;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
}

/* 动态雷达扫描仪 */
/* 同心圆 */
/* 扫描指针 */
/* 中心点 */

/* Hero 文字动画 */
.hero h1{
    font-size: 3.5rem; margin-bottom: 1rem; font-weight: 700; letter-spacing: 2px;
    color: #fff; text-shadow: 0 0 30px rgba(64, 224, 208, 0.6);
    opacity: 0; animation: fadeInText 1s ease-out forwards 0.5s;
}
.hero p{
    font-size: 1.2rem; margin-bottom: 3rem; opacity: 0;
    color: var(--text-dim); font-weight: 300; letter-spacing: 1px;
    animation: fadeInText 1s ease-out forwards 1s;
}
/* 启动按钮 */
.start-btn {
    padding: 1rem 3.5rem;
    font-size: 1.1rem;
    border-radius: 50px;
    background: rgba(255,255,255,0.05);
    color: var(--primary-color);
    border: 1px solid rgba(64,224,208,0.4);
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
    opacity: 0; animation: fadeInText 1s ease-out forwards 1.5s;
}
.start-btn:hover {
    background: rgba(64,224,208,0.15);
    box-shadow: 0 0 30px rgba(64,224,208,0.4);
    letter-spacing: 2px;
    border-color: var(--primary-color);
    transform: translateY(-2px);
}

@keyframes radarSpin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes fadeInText { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }


/* ========= 🌟 核心板块：详细使用指南 (6宫格玻璃拟态) ========= */
.manual-feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}
.manual-lead {
    font-size: 1.2rem;
    font-weight: 600;
    color: #fff;
    margin-bottom: 1.2rem;
}
.manual-card {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 24px;
    padding: 1.6rem 2rem;
    text-align: left;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: flex-start;
    gap: 1.1rem;
    position: relative;
    overflow: hidden;
}
/* 卡片悬停光效 */
.manual-card::before {
    content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(64, 224, 208, 0.1), transparent);
    transition: 0.5s;
}
.manual-card:hover::before { left: 100%; }
.manual-card:hover, .manual-card.active {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    border-color: var(--primary-color);
    background: rgba(64, 224, 208, 0.05);
}
.manual-card.active { border-left: 4px solid var(--primary-color); }

.manual-icon {
    width: 130px; height: 130px;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.08), rgba(255,255,255,0.02)),
                linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.01));
    border-radius: 18px;
    display: flex; align-items: center; justify-content: center;
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: inset 0 0 25px rgba(0,0,0,0.6), 0 10px 25px rgba(0,0,0,0.35);
    color: var(--primary-color);
}
.manual-icon img {
    width: 104px;
    height: 104px;
    object-fit: contain;
    filter: drop-shadow(0 0 8px rgba(64, 224, 208, 0.25));
}
.manual-icon svg {
    width: 48px;
    height: 48px;
    stroke: var(--primary-color);
    stroke-width: 1.8;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
    filter: drop-shadow(0 0 10px rgba(64, 224, 208, 0.25));
}
.manual-text-group { flex: 1; }
.manual-title {
    font-size: 1.3rem; font-weight: 700; color: #fff; margin-bottom: 0.5rem;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}
.manual-desc {
    font-size: 0.95rem; color: var(--text-dim); line-height: 1.6;
}

/* 交互面板 */
.manual-panel {
    background: rgba(20, 25, 30, 0.8);
    border-radius: 30px;
    padding: 3rem;
    box-shadow: 0 30px 80px rgba(0,0,0,0.6);
    border: 1px solid rgba(64, 224, 208, 0.2);
    display: none; animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    backdrop-filter: blur(20px);
}
@keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
.manual-panel.active { display: block; }

.panel-content-wrapper { display: grid; grid-template-columns: 1fr 1.1fr; gap: 4rem; align-items: center; }
.panel-text h3 { font-size: 2.2rem; margin-bottom: 1.5rem; color: var(--primary-color); text-shadow: 0 0 20px rgba(64,224,208,0.4); }
.panel-text h3 { white-space: nowrap; }
.panel-highlight {
    background: linear-gradient(90deg, rgba(64,224,208,0.1), transparent);
    border-left: 4px solid var(--primary-color);
    padding: 1.5rem; border-radius: 0 12px 12px 0; margin: 2rem 0;
    color: #fff; font-weight: 500;
}
.panel-image {
    border-radius: 24px; overflow: hidden;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.1);
    position: relative;
    transition: 0.5s;
    margin-top: 85px; /* 下移右侧图片，按需微调 */
}
.panel-image::after {
    content:''; position: absolute; inset:0;
    box-shadow: inset 0 0 40px rgba(0,0,0,0.6);
    pointer-events: none;
}
.panel-image:hover { transform: scale(1.02); box-shadow: 0 30px 60px rgba(64,224,208,0.15); border-color: var(--primary-color); }
.panel-image img { width: 100%; display: block; }

/* 图标行样式 */
.icon-row { 
    display: flex; align-items: center; gap: 1.2rem; margin-bottom: 1.2rem; padding: 1.2rem; 
    background: rgba(255,255,255,0.03); border-radius: 16px; 
    border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; 
}
.icon-row:hover { background: rgba(64, 224, 208, 0.08); border-color: rgba(64,224,208,0.3); }
.icon-row.icon-row-lg {
    padding: 1.4rem;
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(255,255,255,0.03);
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}
.icon-row.icon-row-lg:hover { border-color: rgba(64,224,208,0.35); box-shadow: 0 15px 35px rgba(0,0,0,0.35); background: rgba(64,224,208,0.05); }
.icon-row.icon-row-lg strong { font-size: 1.05rem; color: #fff; }
.icon-row.icon-row-lg span { font-size: 1rem; }
.icon-box { 
    width: 88px; height: 88px; display: flex; align-items: center; justify-content: center; 
    background: radial-gradient(circle at 30% 30%, rgba(64,224,208,0.08), rgba(20,35,40,0.02)),
                linear-gradient(135deg, rgba(64,224,208,0.08), rgba(64,224,208,0.02));
    border-radius: 18px; flex-shrink: 0; 
    color: var(--primary-color); 
    border: 1px solid rgba(64,224,208,0.55);
    box-shadow: inset 0 0 22px rgba(0,0,0,0.6), 0 0 18px rgba(64,224,208,0.25);
}
.icon-box img {
    width: 120px;
    height: 120px;
    object-fit: contain;
    filter: drop-shadow(0 0 12px rgba(64, 224, 208, 0.35));
}
.icon-box.icon-box-lg {
    width: 100px;
    height: 100px;
    border-radius: 22px;
}
.icon-box.icon-box-lg img {
    width: 180px;
    height: 180px;
}
.icon-box.icon-safe-sm {
    width: 90px;
    height: 90px;
}
.icon-box.icon-safe-sm img {
    width: 68px;
    height: 68px;
}
/* 安全防护：防跌落/防碰撞图标单独尺寸 */
.icon-box.icon-safe-md {
    width: 78px;
    height: 78px;
}
.icon-box.icon-safe-md img {
    width: 56px;
    height: 56px;
}


.icon-box.icon-clean-auto { width: 82px; height: 82px; }
.icon-box.icon-clean-auto img { width: 118px; height: 118px; }
.icon-box.icon-clean-spot { width: 82px; height: 82px; }
.icon-box.icon-clean-spot img { width: 128px; height: 128px; }
.icon-box.icon-clean-edge { width: 82px; height: 82px; }
.icon-box.icon-clean-edge img { width: 118px; height: 118px; }
.icon-box.icon-clean-schedule { width: 85px; height: 85px; }
.icon-box.icon-clean-schedule img { width: 132px; height: 132px; }

.icon-box.icon-box-battery {
    width: 100px;
    height: 100px;
    border-radius: 18px;
}
.icon-box.icon-box-battery img {
    width: 180px;
    height: 180px;
}

/* ========= 模拟器 (APP Simulator) ========= */
.simulator-wrapper{background:#0b0d10;border-radius:40px;padding:30px;box-shadow:0 40px 80px rgba(0,0,0,0.6);border: 1px solid rgba(64, 224, 208, 0.15);position: relative;}
.flight-simulator{background:#000;border-radius:24px;position:relative;height:550px;display:flex;align-items:center;justify-content:center;overflow:hidden;border:4px solid #1a1a1a;box-shadow: inset 0 0 30px rgba(0,0,0,0.8);}
.simulator-screen{width:100%;height:100%;background:radial-gradient(circle at center, #112 0%, #000 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.2rem;color:var(--primary-color);font-family:'Courier New', monospace; position: relative;}
.control-panel-sim{position:absolute;bottom:30px;display:flex;gap:1.2rem; z-index: 10;}
.control-btn-sim{
    padding:0.8rem 1.8rem; border-radius:30px; border:1px solid rgba(255,255,255,0.2);
    background:rgba(0,0,0,0.5); color: #fff; cursor:pointer; transition:0.3s; 
    backdrop-filter: blur(10px); font-size: 0.95rem; font-weight: 600;
}
.control-btn-sim:hover, .control-btn-sim.active{
    background:var(--primary-color); color:#000; border-color:var(--primary-color);
    box-shadow: 0 0 20px rgba(64,224,208,0.5);
}

/* 雷达动画 */
.radar-loader {
    width: 100px; height: 100px;
    border: 2px solid rgba(64,224,208,0.2);
    border-radius: 50%;
    position: relative;
    margin: 0 auto 2rem;
    box-shadow: 0 0 30px rgba(64,224,208,0.1);
}
.radar-loader::after {
    content: ''; position: absolute; top: 50%; left: 50%;
    width: 100%; height: 100%;
    background: conic-gradient(transparent 0deg, rgba(64,224,208,0.8) 360deg);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: radarSpin 1.5s linear infinite;
    filter: blur(2px);
}
.radar-icon {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    font-size: 2.5rem; z-index: 2; text-shadow: 0 0 10px rgba(64,224,208,0.8);
}

/* 建图完成后的地图样式 */
.sim-map-img {
    width: 100%; height: 100%; object-fit: cover;
    position: absolute; top: 0; left: 0; opacity: 0;
    animation: fadeIn 1.5s forwards; cursor: zoom-in;
    filter: contrast(1.2) brightness(0.8) hue-rotate(10deg); /* 科技感滤镜 */
    transition: 0.3s;
}
.sim-map-img:hover { filter: contrast(1) brightness(1) hue-rotate(0); }

/* ========= AI 实验室 ========= */
.ai-lab-container {display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2.5rem; width: 100%;}
.ai-card {background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.08); border-radius: 24px; padding: 2.5rem; display: flex; flex-direction: column; backdrop-filter: blur(10px); transition: 0.4s;}
.ai-card:hover { transform: translateY(-5px); border-color: var(--primary-color); box-shadow: 0 10px 40px rgba(64,224,208,0.15); }
.ai-card h3 {color: var(--primary-color); font-size: 1.6rem; margin-bottom: 1.5rem; display:flex; align-items:center; gap:10px; text-shadow: 0 0 15px rgba(64,224,208,0.4);}
.ai-input, .ai-select {width: 100%; padding: 1.2rem; background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: #fff; font-size: 1rem; margin-bottom: 1.2rem; outline: none; transition: 0.3s;}
.ai-input:focus, .ai-select:focus { border-color: var(--primary-color); box-shadow: 0 0 15px rgba(64,224,208,0.2); background: rgba(0,0,0,0.6); }
.ai-btn {
    background: linear-gradient(135deg, var(--primary-color) 0%, #008B8B 100%);
    border: none; padding: 1.2rem; border-radius: 12px;
    color: #000; font-weight: 800; font-size: 1.1rem;
    cursor: pointer; width: 100%; margin-top: auto;
    box-shadow: 0 5px 20px rgba(64,224,208,0.3);
    transition: 0.3s;
}
.ai-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(64,224,208,0.5); }
.ai-result-box {margin-top: 1.5rem; background: rgba(0,0,0,0.4); padding: 1.5rem; border-radius: 12px; min-height: 100px; color: #ccc; font-size: 0.95rem; border-left: 3px solid rgba(255,255,255,0.1); line-height: 1.6;}

/* 维护 Grid */
.video-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:2rem;width:100%}
.video-card{
    background:rgba(255,255,255,0.03); border-radius:20px; padding:2rem;
    border:1px solid rgba(255,255,255,0.05); cursor:pointer; transition:0.4s;
    text-align:center; display: flex; flex-direction: column; align-items: center;
}
.video-card:hover{transform:translateY(-8px); border-color: var(--primary-color); background: rgba(64,224,208,0.05); box-shadow: 0 15px 30px rgba(0,0,0,0.3);}
.video-icon{font-size:3.5rem;margin-bottom:1.5rem;display:block; text-shadow: 0 5px 15px rgba(0,0,0,0.5);}
.video-icon img{width:150px;height:150px;object-fit:contain;display:block;margin:0 auto;}

/* 首次使用建议 */
.advice-item { display: flex; gap: 15px; margin-bottom: 20px; align-items: flex-start; text-align: left; padding: 1rem; background: rgba(255,255,255,0.02); border-radius: 12px; }
.advice-icon { color: #00ff88; font-size: 1.2rem; flex-shrink: 0; margin-top: 2px; }
.advice-text { font-size: 1.05rem; opacity: 0.9; line-height: 1.5; color: #eee; }

/* 底部按钮美化 */
.advice-buttons {
    display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; margin-top: 3rem;
}
.cta-button {
    display: inline-flex; align-items: center; justify-content: center;
    padding: 1rem 3rem; border-radius: 50px; font-weight: 700; font-size: 1.1rem;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    text-decoration: none; position: relative; overflow: hidden;
}
.cta-button i { margin-right: 10px; font-style: normal; font-size: 1.2rem; }

/* 主按钮 (下载) */
.primary-btn {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: #000; border: none;
    box-shadow: 0 0 20px rgba(64,224,208,0.4);
}
.primary-btn:hover {
    transform: translateY(-4px); box-shadow: 0 0 40px rgba(64,224,208,0.7);
}
/* 次按钮 (客服) */
.secondary-btn {
    background: rgba(255,255,255,0.05); color: var(--text-light);
    border: 1px solid rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
}
.secondary-btn:hover {
    background: rgba(255,255,255,0.1); border-color: var(--primary-color);
    color: var(--primary-color); box-shadow: 0 0 20px rgba(64,224,208,0.2);
    transform: translateY(-4px);
}

/* 弹窗 */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:9999;display:none;align-items:center;justify-content:center; backdrop-filter: blur(10px);}
.modal.active{display:flex; animation: fadeIn 0.3s;}
.modal-box{width:90%;max-width:800px;background:#1a1a1a;border-radius:20px;padding:30px;position:relative;text-align:center; border: 1px solid var(--primary-color); box-shadow: 0 0 50px rgba(64,224,208,0.2);}
.modal-close{position:absolute;top:-50px;right:0;width:40px;height:40px;border:2px solid #fff;border-radius:50%;color:#fff;font-size:1.5rem;cursor:pointer;display:grid;place-items:center;transition:0.3s;}
.modal-close:hover { background: #fff; color: #000; transform: rotate(90deg); }

/* 响应式 */
@media (max-width:768px){
    .hero { min-height: 80vh; }
    .hero h1 { font-size: 2.5rem; }
    .panel-content-wrapper { grid-template-columns: 1fr; }
    .manual-feature-grid { grid-template-columns: 1fr; }
    .nav-menu{display:none} 
    .control-panel-sim { flex-wrap: wrap; justify-content: center; width: 90%; }
}

@keyframes fadeIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
</style>
</head>

<body>
<!-- 粒子背景 -->
<div id="particles-js"></div>

<!-- 导航 -->
<nav class="navbar">
  <div class="nav-container">
    <div class="logo"><span style="color:var(--primary-color)">❖</span> SmartClean X1</div>
    <ul class="nav-menu">
      <li class="nav-item active" onclick="scrollToSection('home')" title="点击则跳转">首页</li>
      <li class="nav-item" onclick="scrollToSection('manual')" title="点击则跳转"> 使用指南</li>
      <li class="nav-item" onclick="scrollToSection('simulation')" title="点击则跳转">智能操控</li>
      <li class="nav-item" onclick="scrollToSection('ai-lab')" style="color:var(--primary-color)" title="点击则跳转"> AI 实验室</li>
      <li class="nav-item" onclick="scrollToSection('maintenance')" title="点击则跳转">维护保养</li>
      <li class="nav-item" onclick="scrollToSection('advice')" title="点击则跳转">使用建议</li>
    </ul>
  </div>
</nav>

<main class="main-content">
  <!-- 1. Hero：动态雷达终端 -->
  <section class="section hero visible" id="home">
    <h1>您的智能清洁专家</h1>
    <p>SmartClean X1 电子交互说明书</p>
    <button class="start-btn" onclick="scrollToSection('manual')">阅读使用指南</button>
  </section>

  <!-- 2. 使用指南 (回归6大核心板块) -->
  <section class="section" id="manual">
    <div class="container">
        <h2 class="section-title">使用指南</h2>
        <div class="manual-feature-grid">
            <div class="manual-card active" onclick="manualCardClick(0)">
                <div class="manual-icon" aria-hidden="true">
                    <img src="./图标/1.jpg" alt="清扫功能图标">
                </div>
                <div class="manual-text-group">
                    <div class="manual-title">清扫功能</div>
                    <div class="manual-desc">自动/定点/沿边/预约</div>
                </div>
            </div>
            <div class="manual-card" onclick="manualCardClick(1)">
                <div class="manual-icon" aria-hidden="true">
                    <img src="./图标/2.jpg" alt="智能控制图标">
                </div>
                <div class="manual-text-group">
                    <div class="manual-title">智能控制</div>
                    <div class="manual-desc">APP/语音/禁区设置</div>
                </div>
            </div>
            <div class="manual-card" onclick="manualCardClick(2)">
                <div class="manual-icon" aria-hidden="true">
                    <img src="./图标/3.jpg" alt="续航与充电图标">
                </div>
                <div class="manual-text-group">
                    <div class="manual-title">续航与充电</div>
                    <div class="manual-desc">断点续扫/自动回充</div>
                </div>
            </div>
            <div class="manual-card" onclick="manualCardClick(3)">
                <div class="manual-icon" aria-hidden="true">
                    <img src="./图标/4.jpg" alt="安全保护图标">
                </div>
                <div class="manual-text-group">
                    <div class="manual-title">安全保护</div>
                    <div class="manual-desc">防跌落/防缠绕/童锁</div>
                </div>
            </div>
            <div class="manual-card" onclick="manualCardClick(4)">
                <div class="manual-icon" aria-hidden="true">
                    <img src="./图标/5.jpg" alt="特色功能图标">
                </div>
                <div class="manual-text-group">
                    <div class="manual-title">特色功能</div>
                    <div class="manual-desc">宠物优化/多地图</div>
                </div>
            </div>
            <div class="manual-card" onclick="manualCardClick(5)">
                <div class="manual-icon" aria-hidden="true">
                    <img src="./图标/6.jpg" alt="维护提醒图标">
                </div>
                <div class="manual-text-group">
                    <div class="manual-title">维护提醒</div>
                    <div class="manual-desc">耗材寿命/清理指南</div>
                </div>
            </div>
        </div>

        <!-- 交互面板 -->
        <div class="manual-panel active" id="manualPanel"></div>
    </div>
  </section>

  <!-- 3. APP 模拟 -->
  <section class="section" id="simulation">
    <div class="container">
      <h2 class="section-title">智能操控</h2>
      <div class="simulator-wrapper">
        <div class="flight-simulator">
            <div class="simulator-screen" id="simulatorScreen">
                <div style="text-align:center; position:relative; z-index:2">
                    <div style="font-size:4rem; margin-bottom:1rem; opacity:0.8">📱</div>
                    <div>点击下方按钮体验</div>
                </div>
            </div>
            <div class="control-panel-sim">
                <button class="control-btn-sim" onclick="simAction('map')">快速建图</button>
                <button class="control-btn-sim" onclick="simAction('clean')">全屋清扫</button>
                <button class="control-btn-sim" onclick="simAction('zone')">划区清扫</button>
                <button class="control-btn-sim" onclick="simAction('dock')">一键回充</button>
            </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 4. AI 实验室 -->
  <section class="section" id="ai-lab">
    <div class="container">
      <h2 class="section-title"> AI 实验室</h2>
      <div class="ai-lab-container">
        <div class="ai-card">
          <h3> 清洁排程助手</h3>
          <select class="ai-select" id="houseType"><option>小户型 (一居室)</option><option selected>中户型 (两居/三居)</option><option>大平层/别墅</option></select>
          <select class="ai-select" id="floorMat"><option>瓷砖/木地板</option><option>地毯</option><option>养宠家庭</option></select>
          <button class="ai-btn" id="btnSchedule" onclick="getAISchedule()">生成周计划 </button>
          <div class="ai-result-box" id="resSchedule">DeepSeek 准备就绪...</div>
        </div>
        <div class="ai-card">
          <h3> 污渍清洁向导</h3>
          <input type="text" class="ai-input" id="stainType" placeholder="例如：红酒渍、猫砂...">
          <select class="ai-select" id="stainSurface"><option>瓷砖</option><option>地板</option><option>地毯</option></select>
          <button class="ai-btn" id="btnStain" onclick="getAIStainAdvice()">获取建议 </button>
          <div class="ai-result-box" id="resStain">AI 帮您支招...</div>
        </div>
        <div class="ai-card">
          <h3> 智能故障诊断</h3>
          <textarea class="ai-input" id="errorDesc" rows="3" placeholder="例如：原地打转，异响..." style="resize:none;"></textarea>
          <button class="ai-btn" id="btnDiagnose" onclick="getAIDiagnose()">开始诊断 ✨</button>
          <div class="ai-result-box" id="resDiagnose">描述问题...</div>
        </div>
      </div>
    </div>
  </section>

  <!-- 5. 维护保养 -->
  <section class="section" id="maintenance">
    <div class="container">
      <h2 class="section-title">维护保养</h2>
      <div class="video-grid">
        <div class="video-card" onclick="openModal('dustbin')">
            <span class="video-icon"><img src="./8/1.png" alt="清理尘盒图标"></span>
            <h4>清理尘盒</h4>
            <p style="font-size:0.9rem;color: var(--text-light)">每周清理，滤网水洗晾干</p>
        </div>
        <div class="video-card" onclick="openModal('brush')">
            <span class="video-icon"><img src="./8/2.png" alt="清理滚刷图标"></span>
            <h4>清理滚刷</h4>
            <p style="font-size:0.9rem;color: var(--text-light)">切断缠绕毛发</p>
        </div>
        <div class="video-card" onclick="openModal('sensor')">
            <span class="video-icon"><img src="./8/3.png" alt="擦拭传感器图标"></span>
            <h4>擦拭传感器</h4>
            <p style="font-size:0.9rem;color: var(--text-light)">干布擦拭悬崖/沿墙传感器</p>
        </div>
        <div class="video-card" onclick="openModal('mop')">
            <span class="video-icon"><img src="./8/4.png" alt="水箱与拖布图标"></span>
            <h4>水箱与拖布</h4>
            <p style="font-size:0.9rem;color: var(--text-light)">清洗拖布，倒空余水</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 6. 使用建议 -->
  <section class="section" id="advice">
    <div class="container" style="text-align:center;">
        <h2 class="section-title">使用建议</h2>
        <div style="display: inline-block; max-width: 600px; margin-bottom: 3rem;">
            <div class="advice-item">
                <span class="advice-icon">☑</span>
                <span class="advice-text">首次使用前请将电池充满电（约4小时），确保首次建图与运行时电量充足，避免中途返航导致建图失败。</span>
            </div>
            <div class="advice-item">
                <span class="advice-icon">☑</span>
                <span class="advice-text">首次建图前，请务必移除地面杂物（数据线、袜子、玩具等），并将家中所有门全部打开，让机器人一次性完整扫描并构建地图。</span>
            </div>
            <div class="advice-item">
                <span class="advice-icon">☑</span>
                <span class="advice-text">建图完成后，建议立即在App内检查并编辑地图（合并/分割房间、设置禁区、虚拟墙），以获得最佳清扫体验。</span>
            </div>
            <div class="advice-item">
                <span class="advice-icon">☑</span>
                <span class="advice-text">首次拖地前，请先用纯净水湿润拖布并装好，确保水箱已加满清水，避免干拖损伤地板。</span>
            </div>
        </div>
        
        <div class="advice-buttons">
            <a href="#" class="cta-button primary-btn">
                 下载 APP
            </a>
            <a href="#" class="cta-button secondary-btn">
                 联系客服
            </a>
        </div>
    </div>
  </section>

</main>

<!-- 弹窗 -->
<div class="modal" id="infoModal">
  <div class="modal-box">
    <div class="modal-close" onclick="closeModal()">✕</div>
    <div id="modalContent"></div>
  </div>
</div>

<script>
// 初始化粒子
particlesJS('particles-js', {
  "particles": { "number": { "value": 60 }, "color": { "value": "#40E0D0" }, "opacity": { "value": 0.3 }, "size": { "value": 2 }, "line_linked": { "enable": true, "color": "#40E0D0", "opacity": 0.15 } },
  "interactivity": { "events": { "onhover": { "enable": true, "mode": "grab" } } }
});

// 页面滚动
const sections = document.querySelectorAll('.section');
const observer = new IntersectionObserver((entries)=>{
    entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('visible'); });
}, {threshold: 0.1});
sections.forEach(s => observer.observe(s));

function scrollToSection(id){
    const el = document.getElementById(id);
    if(el) {
        window.scrollTo({top: el.offsetTop - 80, behavior: 'smooth'});
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    }
}

// 📘 详细使用指南数据 (6大核心板块 - 内容深度定制版)
const manualData = [
    {
        title: "智能清扫模式 (Cleaning)",
        html: `
            <div class="panel-content-wrapper">
                <div class="panel-text">
                    <h3>四大专业清扫模式</h3>
                    <p class="manual-lead">SmartClean X1 支持多种路径规划，适应不同清洁场景。</p>
                    
                    <div class="icon-row">
                        <div class="icon-box icon-clean-auto"><img src="./2/1.png" alt="自动清扫图标"></div>
                        <div>
                            <strong>自动清扫 (Auto)：</strong><br>
                            <span style="font-size:0.9rem;color: var(--text-light)">全屋智能规划路径，采用“弓”字形路线覆盖，确保无死角。</span>
                        </div>
                    </div>
                    <div class="icon-row">
                        <div class="icon-box icon-clean-spot"><img src="./2/2.png" alt="定点清扫图标"></div>
                        <div>
                            <strong>定点清扫 (Spot)：</strong><br>
                            <span style="font-size:0.9rem;color: var(--text-light)">针对特定局部脏污区域，进行 1.5x1.5m 范围的井字形清扫。可设置 1-5 次重复清扫。</span>
                        </div>
                    </div>
                    <div class="icon-row">
                        <div class="icon-box icon-clean-edge"><img src="./2/3.png" alt="沿边清扫图标"></div>
                        <div>
                            <strong>沿边清扫 (Edge)：</strong><br>
                            <span style="font-size:0.9rem;color: var(--text-light)">专门贴合墙边和角落行走，深度清理边缘缝隙积尘，无遗漏。</span>
                        </div>
                    </div>
                    <div class="icon-row">
                        <div class="icon-box icon-clean-schedule"><img src="./2/4.png" alt="预约清扫图标"></div>
                        <div>
                            <strong>预约清扫 (Schedule)：</strong><br>
                            <span style="font-size:0.9rem;color: var(--text-light)">设定时间自动启动，离家后自动工作，回家即享洁净空间。</span>
                        </div>
                    </div>
                </div>
                <div class="panel-image">
                    <img src="1.jpg" alt="Cleaning Modes">
                </div>
            </div>
        `
    },
    {
        title: "智能控制 (Smart Control)",
        html: `
            <div class="panel-content-wrapper">
                <div class="panel-text">
                    <h3>APP 远程操控 & 语音助手</h3>
                    <p>不仅是 APP，支持多种智能交互方式。</p>
                    <div class="icon-row icon-row-lg">
                        <div class="icon-box icon-box-lg"><img src="./3/1.png" alt="APP????"></div>
                        <div>
                            <strong>APP 深度操控：</strong><br>
                            - 远程启动/暂停。<br>
                            - 划区清扫：在地图上框选区域。<br>
                            - 禁区设置：画虚拟墙，禁止机器进入。
                        </div>
                    </div>
                    <div class="icon-row icon-row-lg">
                        <div class="icon-box icon-box-lg"><img src="./3/2.png" alt="??????"></div>
                        <div>
                            <strong>语音助手控制：</strong><br>
                            支持连接智能音箱 (如 Alexa, Google Home)。<br>
                            指令示例：“开始扫地”、“暂停工作”、“回去充电”。
                        </div>
                    </div>
                </div>
                <div class="panel-image">
                    <img src="2.jpeg" alt="APP Interface">
                </div>
            </div>
        `
    },
    {
        title: "续航与充电 (Battery)",
        html: `
            <div class="panel-content-wrapper">
                <div class="panel-text">
                    <h3>5200mAh 大电池，无惧大户型</h3>
                    <div class="panel-highlight">
                        <strong>🔌 智能断点续扫：</strong><br>
                        当电量低于 20% 时，机器人会自动返回充电座。充至 80% 后，它会<strong>自动返回</strong>上次中断的位置继续清扫，确保不漏扫。
                    </div>
                    <div class="icon-row">
                        <div class="icon-box icon-box-battery"><img src="./4/1.png" alt="电池图标"></div>
                        <div>
                            <strong>自动回充：</strong><br>
                            清扫完成或电量低时，自动寻找基站。充满电后自动待机。
                        </div>
                    </div>
                </div>
                <div class="panel-image">
                    <img src="3.jpg" alt="Charging">
                </div>
            </div>
        `
    },
    {
        title: "安全保护 (Safety)",
        html: `
            <div class="panel-content-wrapper">
                <div class="panel-text">
                    <h3>全方位传感，多重安全防护</h3>
                    <div class="icon-row">
                        <div class="icon-box"><img src="./5/1.png" alt="防跌落图标"></div>
                        <div><strong>防跌落：</strong> 底部悬崖传感器，遇台阶自动后退。</div>
                    </div>
                    <div class="icon-row">
                        <div class="icon-box"><img src="./5/2.png" alt="防碰撞图标"></div>
                        <div><strong>防碰撞：</strong> 激光雷达 + 碰撞缓冲器，保护家具。</div>
                    </div>
                    <div class="icon-row">
                        <div class="icon-box icon-safe-sm"><img src="./5/3.png" alt="防缠绕图标"></div>
                        <div><strong>防缠绕：</strong> 遇到线缆自动反转脱困。</div>
                    </div>
                    <div class="icon-row">
                        <div class="icon-box icon-safe-sm"><img src="./5/4.png" alt="儿童锁图标"></div>
                        <div><strong>儿童锁：</strong> APP 开启后锁定按键，防止误触。</div>
                    </div>
                </div>
                <div class="panel-image">
                    <img src="4.jpg" alt="Safety">
                </div>
            </div>
        `
    },
    {
        title: "特色功能 (Features)",
        html: `
            <div class="panel-content-wrapper">
                <div class="panel-text">
                    <h3>更懂你的智能管家</h3>
                    <div class="panel-highlight">
                        <strong>🐕 宠物毛发优化：</strong><br>
                        特殊风道设计，更易吸入宠物毛发，减少滚刷缠绕。
                    </div>
                    <div class="icon-row">
                        <div class="icon-box"><img src="./6/1.png" alt="多楼层地图图标"></div>
                        <div>
                            <strong>多楼层地图：</strong><br>
                            支持保存多张地图，复式家庭搬到二楼直接切换。
                        </div>
                    </div>
                    <div class="icon-row">
                        <div class="icon-box"><img src="./6/2.png" alt="自动识别家具图标"></div>
                        <div>
                            <strong>自动识别家具：</strong><br>
                            AI 识别床、沙发、餐桌，并在地图上标记属性。
                        </div>
                    </div>
                </div>
                <div class="panel-image">
                    <img src="5.jpg" alt="Features">
                </div>
            </div>
        `
    },
    {
        title: "维护提醒 (Maintenance)",
        html: `
            <div class="panel-content-wrapper">
                <div class="panel-text">
                    <h3>耗材寿命实时统计</h3>
                    <p>APP 实时监控耗材状态，确保持续高效清洁。</p>
                    <ul style="padding-left:20px;color:#ccc;line-height:1.8;margin-bottom:1rem">
                        <li><strong>尘盒：</strong> 满尘智能提醒。</li>
                        <li><strong>滚刷：</strong> 卡顿或异物缠绕报警。</li>
                        <li><strong>滤网/边刷：</strong> APP 显示剩余寿命百分比。</li>
                    </ul>
                    <div class="panel-highlight">
                        <strong>💡 提示：</strong> 耗材到期后，APP 会推送更换提醒。更换后请在 APP 中“复位”寿命。
                    </div>
                </div>
                <div class="panel-image">
                    <img src="6.jpg" alt="Maintenance">
                </div>
            </div>
        `
    }
];

function switchManual(index) {
    const cards = document.querySelectorAll('.manual-card');
    const panel = document.getElementById('manualPanel');
    cards.forEach((c, i) => c.classList.toggle('active', i === index));
    panel.style.animation = 'none';
    panel.offsetHeight; /* trigger reflow */
    panel.style.animation = 'fadeIn 0.5s ease-out';
    panel.innerHTML = manualData[index].html;
}

function manualCardClick(index) {
    switchManual(index);
    const panel = document.getElementById('manualPanel');
    if (panel) {
        const y = panel.getBoundingClientRect().top + window.pageYOffset - 80;
        window.scrollTo({ top: y, behavior: 'smooth' });
    }
}
switchManual(0);

// 模拟器逻辑
let mapTimer; 

function simAction(action) {
    const screen = document.getElementById('simulatorScreen');
    const btns = document.querySelectorAll('.control-btn-sim');
    
    // 按钮高亮
    btns.forEach(b => b.classList.remove('active'));
    if (event) event.target.classList.add('active');

    // 清除之前的定时器
    if (mapTimer) clearTimeout(mapTimer);

    let html = '';
    
    if (action === 'map') {
        html = `
            <div class="radar-loader"><div class="radar-icon">🗺️</div></div>
            <div style="font-size:1.4rem;font-weight:bold;margin-bottom:0.5rem;color:#40E0D0">LDS 激光扫描中...</div>
            <div style="font-size:0.9rem;opacity:0.7">正在构建全屋户型图</div>
        `;
        screen.innerHTML = `<div style="text-align:center;position:relative;z-index:2">${html}</div>`;

        mapTimer = setTimeout(() => {
            const mapHtml = `
                <img src="7.png" class="sim-map-img" alt="Floor Plan Map" onclick="showFullMap(this.src)" style="transform: rotate(0deg);">
                <div style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.7); padding:8px 20px; border-radius:30px; font-size:0.9rem; color:#fff; z-index:3; backdrop-filter:blur(5px); pointer-events:none;">建图完成 100% (点击查看全图)</div>
            `;
            screen.innerHTML = mapHtml;
        }, 2000);

    } else if (action === 'clean') {
        html = `
            <div class="radar-loader"><div class="radar-icon">🧹</div></div>
            <div style="font-size:1.4rem;font-weight:bold;margin-bottom:0.5rem;color:#40E0D0">规划清扫路径...</div>
            <div style="font-size:0.9rem;opacity:0.7">请稍候，正在生成全屋清扫路线</div>
        `;
        screen.innerHTML = `<div style="text-align:center;position:relative;z-index:2">${html}</div>`;

        mapTimer = setTimeout(() => {
            const cleanHtml = `
                <img src="8.jpg" class="sim-map-img" alt="Full Clean Map" onclick="showFullMap(this.src)" style="transform: rotate(90deg);">
                <div style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.7); padding:8px 20px; border-radius:30px; font-size:0.9rem; color:#fff; z-index:3; backdrop-filter:blur(5px); pointer-events:none;">全屋清扫中 (点击查看全图)</div>
            `;
            screen.innerHTML = cleanHtml;
        }, 2000);
    } else if (action === 'zone') {
        html = `
            <div class="radar-loader"><div class="radar-icon">🎯</div></div>
            <div style="font-size:1.4rem;font-weight:bold;margin-bottom:0.5rem;color:#40E0D0">划区路线规划中...</div>
            <div style="font-size:0.9rem;opacity:0.7">请稍候，正在生成指定区域清扫路径</div>
        `;
        screen.innerHTML = `<div style="text-align:center;position:relative;z-index:2">${html}</div>`;

        mapTimer = setTimeout(() => {
            const zoneHtml = `
                <img src="9.jpg" class="sim-map-img" alt="Zone Clean Map" onclick="showFullMap(this.src)" style="transform: rotate(0deg);">
                <div style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.7); padding:8px 20px; border-radius:30px; font-size:0.9rem; color:#fff; z-index:3; backdrop-filter:blur(5px); pointer-events:none;">划区清扫中 (点击查看全图)</div>
            `;
            screen.innerHTML = zoneHtml;
        }, 2000);
    } else if (action === 'dock') {
        html = `
            <div class="radar-loader"><div class="radar-icon">⚡</div></div>
            <div style="font-size:1.4rem;font-weight:bold;margin-bottom:0.5rem;color:#40E0D0">定位充电座...</div>
            <div style="font-size:0.9rem;opacity:0.7">请稍候，正在导航回充</div>
        `;
        screen.innerHTML = `<div style="text-align:center;position:relative;z-index:2">${html}</div>`;

        mapTimer = setTimeout(() => {
            const dockHtml = `
                <img src="10.jpg" class="sim-map-img" alt="Docking Map" onclick="showFullMap(this.src)" style="transform: rotate(0deg);">
                <div style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.7); padding:8px 20px; border-radius:30px; font-size:0.9rem; color:#fff; z-index:3; backdrop-filter:blur(5px); pointer-events:none;">正在返回基站 (点击查看全图)</div>
            `;
            screen.innerHTML = dockHtml;
        }, 2000);
    }
}

// 点击查看全图 (支持图片旋转)
function showFullMap(src) {
    const content = document.getElementById('modalContent');
    const modal = document.getElementById('infoModal');
    const isNine = src.includes('9.png');
    const rotate = isNine ? '90deg' : '0deg';
    content.innerHTML = `
        <div style="position: relative; width: 100%; height: 80vh; display: flex; align-items: center; justify-content: center; overflow: hidden;">
            <img src="${src}" style="transform: rotate(${rotate}); max-width: 90vw; max-height: 80vh; object-fit: contain; border-radius: 8px;">
        </div>
        <p style="text-align: center; margin-top: 10px; color: #666; font-size: 0.9rem;">已为您横向展示全图</p>
    `;
    modal.classList.add('active');
}

// 维护弹窗
function openModal(type) {
    const content = document.getElementById('modalContent');
    const modal = document.getElementById('infoModal');
    let html = '';
    if(type==='dustbin') html = '<h3>清理尘盒</h3><p>取出尘盒 -> 倒掉垃圾 -> 清洗滤网。<br><strong>注意：</strong>HEPA滤网必须晾干24小时才能装回。</p>';
    if(type==='brush') html = '<h3>清理滚刷</h3><p>拆卸主刷盖 -> 取出主刷 -> 使用小工具清理两端缠绕毛发。</p>';
    if(type==='sensor') html = '<h3>传感器保养</h3><p>定期用干布擦拭机器底部的悬崖传感器和侧面的沿墙传感器，防止机器乱撞或报错。</p>';
    if(type==='mop') html = '<h3>水箱与拖布保养</h3><div style="font-size:4rem;margin:1rem"></div><p>1. 每次拖地结束后，请务必取出水箱，倒掉剩余的水，防止产生异味。<br>2. 撕下拖布清洗并晾干。</p>';
    content.innerHTML = html;
    modal.classList.add('active');
}
function closeModal() { document.getElementById('infoModal').classList.remove('active'); }

/* ================= DeepSeek (Volcengine ARK) API ================= */
const apiKey = "40a16331-f4b0-43a0-865b-abf84c05fd30"; // 前端直连会暴露密钥，仅作作业演示
const modelId = "ep-20251201003809-x45z4"; // 请填控制台里的 DeepSeek 接入点/模型 ID

async function callAI(prompt, system, elementId, btnId) {
    const resBox = document.getElementById(elementId);
    const btn = document.getElementById(btnId);
    if (btn.disabled) return;

    btn.disabled = true;
    const originalBtnText = btn.innerText;
    btn.innerText = "DeepSeek 生成中...";
    resBox.innerHTML = '<div style="text-align:center; opacity:0.7">AI 正在生成...</div>';
    
    try {
        const response = await fetch("https://ark.cn-beijing.volces.com/api/v3/chat/completions", {
            method: 'POST',
            mode: 'cors',
            referrerPolicy: 'no-referrer',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${apiKey}`
            },
            body: JSON.stringify({
                model: modelId,
                messages: [
                    { role: 'system', content: system },
                    { role: 'user', content: prompt }
                ],
                stream: false
            })
        });
        if (!response.ok) {
            const errText = await response.text();
            throw new Error(`HTTP ${response.status}: ${errText}`);
        }
        const data = await response.json();
        const text = data.choices?.[0]?.message?.content || "AI 暂时无回复";
        resBox.innerHTML = marked.parse(text);
    } catch (e) {
        console.error(e);
        resBox.innerHTML = `<span style="color:#ff6b6b">请求失败：${e.message || "网络错误"}</span>`;
    } finally {
        btn.disabled = false;
        btn.innerText = originalBtnText;
    }
}

function getAISchedule() {
    const house = document.getElementById('houseType').value;
    const floor = document.getElementById('floorMat').value;
    const sys = `智能家居顾问。生成Markdown表格周计划。每天模式（如：周一 [全屋清扫-标准]）。针对环境（${floor}）给建议。`;
    const user = `户型：${house}，环境：${floor}。`;
    callAI(user, sys, 'resSchedule', 'btnSchedule');
}

function getAIStainAdvice() {
    const stain = document.getElementById('stainType').value;
    const surface = document.getElementById('stainSurface').value;
    if(!stain) return alert("请输入污渍类型");
    const sys = `清洁专家。建议预处理步骤、机器人模式、注意事项。Markdown列表回答。`;
    const user = `污渍：${stain}，地面：${surface}。`;
    callAI(user, sys, 'resStain', 'btnStain');
}

function getAIDiagnose() {
    const error = document.getElementById('errorDesc').value;
    if(!error) return alert("请描述问题");
    const sys = `技术支持。给出3个排查步骤。Markdown格式。`;
    callAI(error, sys, 'resDiagnose', 'btnDiagnose');
}
</script>
</body>
</html>


